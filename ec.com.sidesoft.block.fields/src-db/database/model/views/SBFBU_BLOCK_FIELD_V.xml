<?xml version="1.0"?>
  <database name="VIEW SBFBU_BLOCK_FIELD_V">
    <view name="SBFBU_BLOCK_FIELD_V"><![CDATA[SELECT fieldhide.field_hide, fieldhide.usuario, 0 AS ad_client_id, 0 AS ad_org_id, 0 AS createdby, now() AS created, 0 AS updatedby, now() AS updated, to_char('Y') AS isactive, get_uuid() AS sbfbu_block_field_v_id FROM (SELECT lower(((CASE WHEN adp.ad_module_id = '0' THEN adp.name || '_' ELSE '' END || atbl.name) || '_') || ac.columnname) AS field_hide, CASE WHEN pestanias.foption = 'A' AND fields.ad_column_id = pestanias.p_column THEN 'S' WHEN pestanias.foption = 'A' AND COALESCE(fields.ad_column_id, 'ND') = 'ND' THEN 'NS' WHEN pestanias.foption = 'N' AND fields.ad_column_id = pestanias.p_column THEN 'NS' WHEN pestanias.foption = 'N' AND COALESCE(fields.ad_column_id, 'ND') = 'ND' THEN 'S' ELSE NULL END AS campos, au.ad_user_id AS usuario, pestanias.p_tabname, atbl.tablename FROM (SELECT af.ad_tab_id AS p_tab, af.name AS p_tabname, atab.ad_table_id AS p_table, af.name AS p_name, af.ad_field_id AS p_field, af.ad_column_id AS p_column, sbf.sbfbu_block_field_id AS p_blockfield_id, sbf.ad_role_id AS p_role_id, sbf.field_option AS foption FROM ad_tab atab JOIN ad_field af ON af.ad_tab_id = atab.ad_tab_id, sbfbu_block_field sbf WHERE sbf.ad_tab_id = atab.ad_tab_id ORDER BY af.name, af.ad_tab_id) pestanias LEFT JOIN (SELECT sbf.sbfbu_block_field_id, lower((atbl.name || '_') || ac.columnname) AS field_hide, sf.ad_field_id, ac.ad_column_id, sbf.field_option AS foption, au.ad_user_id AS usuario FROM sbfbu_block_field sbf JOIN sbfbu_fields sf ON sf.sbfbu_block_field_id = sbf.sbfbu_block_field_id JOIN ad_tab atab ON atab.ad_tab_id = sbf.ad_tab_id JOIN ad_field af ON af.ad_field_id = sf.ad_field_id JOIN ad_table atbl ON atbl.ad_table_id = atab.ad_table_id JOIN ad_column ac ON ac.ad_column_id = af.ad_column_id JOIN ad_role ar ON ar.ad_role_id = sbf.ad_role_id JOIN ad_user_roles adr ON ar.ad_role_id = adr.ad_role_id JOIN ad_user au ON adr.ad_user_id = au.ad_user_id) fields ON fields.ad_column_id = pestanias.p_column AND pestanias.p_blockfield_id = fields.sbfbu_block_field_id JOIN ad_table atbl ON atbl.ad_table_id = pestanias.p_table JOIN ad_column ac ON ac.ad_column_id = pestanias.p_column JOIN ad_role ar ON ar.ad_role_id = pestanias.p_role_id JOIN ad_user_roles adr ON ar.ad_role_id = adr.ad_role_id JOIN ad_user au ON adr.ad_user_id = au.ad_user_id JOIN sbfbu_block_field sbfb ON sbfb.ad_tab_id = pestanias.p_tab JOIN ad_package ap ON ap.ad_package_id = atbl.ad_package_id JOIN ad_module_dbprefix adp ON adp.ad_module_id = ap.ad_module_id GROUP BY lower(((CASE WHEN adp.ad_module_id = '0' THEN adp.name || '_' ELSE '' END || atbl.name) || '_') || ac.columnname), CASE WHEN pestanias.foption = 'A' AND fields.ad_column_id = pestanias.p_column THEN 'S' WHEN pestanias.foption = 'A' AND COALESCE(fields.ad_column_id, 'ND') = 'ND' THEN 'NS' WHEN pestanias.foption = 'N' AND fields.ad_column_id = pestanias.p_column THEN 'NS' WHEN pestanias.foption = 'N' AND COALESCE(fields.ad_column_id, 'ND') = 'ND' THEN 'S' ELSE NULL END, au.ad_user_id, pestanias.p_tabname, atbl.tablename) fieldhide WHERE fieldhide.campos = 'S']]></view>
  </database>
